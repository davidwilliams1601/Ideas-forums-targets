<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ideas Forums - Monthly Sales Targets & KPIs 2025-2026</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“Š</text></svg>">
    <style>
        .chart-container { 
            position: relative; 
            height: 400px; 
            width: 100%;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const MonthlySalesTargets = () => {
            const [view, setView] = useState('overview');
            const [actuals, setActuals] = useState(() => {
                const saved = localStorage.getItem('ideasForumsActuals');
                return saved ? JSON.parse(saved) : {
                    ideasFest: { tickets: 800, revenue: 0 },
                    gbea: { tickets: 0, sponsors: 0, revenue: 0 },
                    gbia: { tickets: 0, sponsors: 0, revenue: 0 },
                    ukStartupRegional: { tickets: 0, sponsors: 0, revenue: 0 },
                    ukStartupNational: { tickets: 0, sponsors: 0, revenue: 0 },
                    fastGrowthIndex: { tickets: 0, sponsors: 0, revenue: 0 },
                    ideasCommunity: { members: 0, revenue: 0 },
                    website: { revenue: 0 },
                    ideasTables: { tickets: 0, revenue: 0 },
                    vcCollab: { revenue: 0 }
                };
            });

            const revenueChartRef = useRef(null);
            const cumulativeChartRef = useRef(null);
            const revenueChartInstance = useRef(null);
            const cumulativeChartInstance = useRef(null);

            // Save actuals to localStorage whenever they change
            useEffect(() => {
                localStorage.setItem('ideasForumsActuals', JSON.stringify(actuals));
            }, [actuals]);

            // Targets with updated regional sponsorship value
            const targets = {
                ideasFest: { tickets: 2500, revenue: 609500, sponsors: { stage: 10, traders: 100, tabletop: 100 } },
                gbea: { tickets: 1500, revenue: 812500, sponsors: { headline: 1, category: 20 } },
                gbia: { tickets: 250, revenue: 267500, sponsors: { headline: 1, category: 13 } },
                ukStartupRegional: { tickets: 1500, revenue: 1511500, sponsors: { category: 220 } }, // Updated: 220 Ã— Â£1,950 = Â£429,000
                ukStartupNational: { tickets: 400, revenue: 149600, sponsors: { category: 22 } },
                fastGrowthIndex: { tickets: 800, revenue: 430000, sponsors: { headline: 1 } },
                ideasCommunity: { members: 5000, revenue: 3040000 },
                website: { revenue: 295000 },
                ideasTables: { tickets: 1800, revenue: 135000 },
                vcCollab: { revenue: 2500000 }
            };

            const totalTargetRevenue = Object.values(targets).reduce((sum, t) => sum + t.revenue, 0);
            const totalActualRevenue = Object.values(actuals).reduce((sum, a) => sum + (a.revenue || 0), 0);
            const totalTargetTickets = targets.ideasFest.tickets + targets.gbea.tickets + targets.gbia.tickets + 
                                       targets.ukStartupRegional.tickets + targets.ukStartupNational.tickets + 
                                       targets.fastGrowthIndex.tickets + targets.ideasTables.tickets + targets.ideasCommunity.members;

            const formatCurrency = (value) => `Â£${Math.round(value / 1000)}k`;
            const formatCurrencyFull = (value) => `Â£${value.toLocaleString()}`;
            const calculateProgress = (actual, target) => Math.min(100, Math.round((actual / target) * 100));

            const updateActual = (event, key, field) => {
                const value = parseFloat(event.target.value) || 0;
                setActuals(prev => ({
                    ...prev,
                    [key]: { ...prev[key], [field]: value }
                }));
            };

            // Initialize charts
            useEffect(() => {
                if (view === 'overview') {
                    if (revenueChartInstance.current) revenueChartInstance.current.destroy();
                    if (cumulativeChartInstance.current) cumulativeChartInstance.current.destroy();

                    setTimeout(() => {
                        if (revenueChartRef.current) {
                            const ctx = revenueChartRef.current.getContext('2d');
                            revenueChartInstance.current = new Chart(ctx, {
                                type: 'bar',
                                data: {
                                    labels: ['Ideas Fest', 'GBEA', 'UK Regional', 'Ideas Community', 'VC Collab', 'FGI', 'Website', 'GBIA', 'UK National', 'Ideas Tables'],
                                    datasets: [{
                                        label: 'Target',
                                        data: [
                                            targets.ideasFest.revenue,
                                            targets.gbea.revenue,
                                            targets.ukStartupRegional.revenue,
                                            targets.ideasCommunity.revenue,
                                            targets.vcCollab.revenue,
                                            targets.fastGrowthIndex.revenue,
                                            targets.website.revenue,
                                            targets.gbia.revenue,
                                            targets.ukStartupNational.revenue,
                                            targets.ideasTables.revenue
                                        ],
                                        backgroundColor: 'rgba(59, 130, 246, 0.6)'
                                    }, {
                                        label: 'Actual',
                                        data: [
                                            actuals.ideasFest.revenue,
                                            actuals.gbea.revenue,
                                            actuals.ukStartupRegional.revenue,
                                            actuals.ideasCommunity.revenue,
                                            actuals.vcCollab.revenue,
                                            actuals.fastGrowthIndex.revenue,
                                            actuals.website.revenue,
                                            actuals.gbia.revenue,
                                            actuals.ukStartupNational.revenue,
                                            actuals.ideasTables.revenue
                                        ],
                                        backgroundColor: 'rgba(34, 197, 94, 0.8)'
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    plugins: {
                                        tooltip: {
                                            callbacks: {
                                                label: function(context) {
                                                    return context.dataset.label + ': ' + formatCurrencyFull(context.parsed.y);
                                                }
                                            }
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            ticks: {
                                                callback: function(value) {
                                                    return formatCurrency(value);
                                                }
                                            }
                                        },
                                        x: {
                                            ticks: { maxRotation: 45, minRotation: 45 }
                                        }
                                    }
                                }
                            });
                        }

                        if (cumulativeChartRef.current) {
                            const ctx = cumulativeChartRef.current.getContext('2d');
                            const progressPercent = (totalActualRevenue / totalTargetRevenue) * 100;
                            
                            cumulativeChartInstance.current = new Chart(ctx, {
                                type: 'doughnut',
                                data: {
                                    labels: ['Achieved', 'Remaining'],
                                    datasets: [{
                                        data: [totalActualRevenue, Math.max(0, totalTargetRevenue - totalActualRevenue)],
                                        backgroundColor: ['rgba(34, 197, 94, 0.8)', 'rgba(229, 231, 235, 0.5)'],
                                        borderWidth: 0
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    plugins: {
                                        legend: { position: 'bottom' },
                                        tooltip: {
                                            callbacks: {
                                                label: function(context) {
                                                    return context.label + ': ' + formatCurrencyFull(context.parsed);
                                                }
                                            }
                                        }
                                    }
                                }
                            });
                        }
                    }, 100);
                }
            }, [view, actuals]);

            return (
                <div className="w-full p-6 bg-gray-50 min-h-screen">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">Ideas Forums</h1>
                            <h2 className="text-xl text-gray-600 mb-4">Sales Targets & Performance Tracking (2025-2026)</h2>
                            
                            <div className="flex space-x-4 mb-6 flex-wrap">
                                <button
                                    onClick={() => setView('overview')}
                                    className={`px-4 py-2 rounded mb-2 transition-all duration-200 ${view === 'overview' ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-200 hover:bg-gray-300'}`}
                                >
                                    Overview
                                </button>
                                <button
                                    onClick={() => setView('actuals')}
                                    className={`px-4 py-2 rounded mb-2 transition-all duration-200 ${view === 'actuals' ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-200 hover:bg-gray-300'}`}
                                >
                                    Enter Actuals
                                </button>
                                <button
                                    onClick={() => setView('progress')}
                                    className={`px-4 py-2 rounded mb-2 transition-all duration-200 ${view === 'progress' ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-200 hover:bg-gray-300'}`}
                                >
                                    Progress Tracking
                                </button>
                                <button
                                    onClick={() => setView('targets')}
                                    className={`px-4 py-2 rounded mb-2 transition-all duration-200 ${view === 'targets' ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-200 hover:bg-gray-300'}`}
                                >
                                    Target Details
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div className="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                                    <h3 className="text-lg font-semibold">Annual Target</h3>
                                    <p className="text-2xl font-bold">{formatCurrencyFull(totalTargetRevenue)}</p>
                                    <p className="text-sm opacity-90">Total revenue goal</p>
                                </div>
                                <div className="bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                                    <h3 className="text-lg font-semibold">Actual Revenue</h3>
                                    <p className="text-2xl font-bold">{formatCurrencyFull(totalActualRevenue)}</p>
                                    <p className="text-sm opacity-90">{calculateProgress(totalActualRevenue, totalTargetRevenue)}% of target</p>
                                </div>
                                <div className="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                                    <h3 className="text-lg font-semibold">Variance</h3>
                                    <p className="text-2xl font-bold">{formatCurrencyFull(totalActualRevenue - totalTargetRevenue)}</p>
                                    <p className="text-sm opacity-90">{totalActualRevenue >= totalTargetRevenue ? 'Over target' : 'Below target'}</p>
                                </div>
                                <div className="bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                                    <h3 className="text-lg font-semibold">Ideas Fest</h3>
                                    <p className="text-lg font-bold">{actuals.ideasFest.tickets} Sold</p>
                                    <p className="text-sm opacity-90">{targets.ideasFest.tickets - actuals.ideasFest.tickets} Remaining</p>
                                </div>
                            </div>
                        </div>

                        {view === 'overview' && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4 text-gray-800">Target vs Actual by Stream</h3>
                                    <div className="chart-container">
                                        <canvas ref={revenueChartRef}></canvas>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4 text-gray-800">Overall Progress</h3>
                                    <div className="chart-container">
                                        <canvas ref={cumulativeChartRef}></canvas>
                                    </div>
                                    <div className="text-center mt-4">
                                        <p className="text-3xl font-bold text-green-600">
                                            {calculateProgress(totalActualRevenue, totalTargetRevenue)}%
                                        </p>
                                        <p className="text-gray-600">of annual target achieved</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'actuals' && (
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h3 className="text-xl font-bold mb-6 text-gray-800">Enter Actual Figures</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {[
                                        { key: 'ideasFest', name: 'Ideas Fest', fields: ['tickets', 'revenue'] },
                                        { key: 'gbea', name: 'GBEA', fields: ['tickets', 'sponsors', 'revenue'] },
                                        { key: 'gbia', name: 'GBIA', fields: ['tickets', 'sponsors', 'revenue'] },
                                        { key: 'ukStartupRegional', name: 'UK Startup Regional', fields: ['tickets', 'sponsors', 'revenue'] },
                                        { key: 'ukStartupNational', name: 'UK Startup National', fields: ['tickets', 'sponsors', 'revenue'] },
                                        { key: 'fastGrowthIndex', name: 'Fast Growth Index', fields: ['tickets', 'sponsors', 'revenue'] },
                                        { key: 'ideasCommunity', name: 'Ideas Community', fields: ['members', 'revenue'] },
                                        { key: 'website', name: 'Website', fields: ['revenue'] },
                                        { key: 'ideasTables', name: 'Ideas Tables', fields: ['tickets', 'revenue'] },
                                        { key: 'vcCollab', name: 'VC Collab', fields: ['revenue'] }
                                    ].map(item => (
                                        <div key={item.key} className="border border-gray-200 rounded-lg p-4 bg-gray-50">
                                            <h4 className="font-semibold text-gray-800 mb-3">{item.name}</h4>
                                            {item.fields.map(field => (
                                                <div key={field} className="mb-3">
                                                    <label className="block text-sm font-medium text-gray-700 mb-1 capitalize">
                                                        {field}:
                                                    </label>
                                                    <input
                                                        type="number"
                                                        value={actuals[item.key][field] || 0}
                                                        onChange={(e) => updateActual(e, item.key, field)}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                        placeholder={`Enter ${field}`}
                                                    />
                                                </div>
                                            ))}
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                    <p className="text-sm text-blue-800">
                                        ðŸ’¡ <strong>Tip:</strong> Your data is automatically saved in your browser. Return anytime to update your figures!
                                    </p>
                                </div>
                            </div>
                        )}

                        {view === 'progress' && (
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h3 className="text-xl font-bold mb-6 text-gray-800">Progress by Revenue Stream</h3>
                                <div className="space-y-6">
                                    {[
                                        { key: 'ideasFest', name: 'Ideas Fest', target: targets.ideasFest.revenue, actual: actuals.ideasFest.revenue },
                                        { key: 'gbea', name: 'GBEA', target: targets.gbea.revenue, actual: actuals.gbea.revenue },
                                        { key: 'ukStartupRegional', name: 'UK Startup Regional', target: targets.ukStartupRegional.revenue, actual: actuals.ukStartupRegional.revenue },
                                        { key: 'ideasCommunity', name: 'Ideas Community', target: targets.ideasCommunity.revenue, actual: actuals.ideasCommunity.revenue },
                                        { key: 'vcCollab', name: 'VC Collab', target: targets.vcCollab.revenue, actual: actuals.vcCollab.revenue },
                                        { key: 'fastGrowthIndex', name: 'Fast Growth Index', target: targets.fastGrowthIndex.revenue, actual: actuals.fastGrowthIndex.revenue },
                                        { key: 'website', name: 'Website', target: targets.website.revenue, actual: actuals.website.revenue },
                                        { key: 'gbia', name: 'GBIA', target: targets.gbia.revenue, actual: actuals.gbia.revenue },
                                        { key: 'ukStartupNational', name: 'UK Startup National', target: targets.ukStartupNational.revenue, actual: actuals.ukStartupNational.revenue },
                                        { key: 'ideasTables', name: 'Ideas Tables', target: targets.ideasTables.revenue, actual: actuals.ideasTables.revenue }
                                    ].map(item => {
                                        const progress = calculateProgress(item.actual, item.target);
                                        const variance = item.actual - item.target;
                                        return (
                                            <div key={item.key} className="border-b border-gray-200 pb-4">
                                                <div className="flex justify-between items-center mb-2">
                                                    <h4 className="font-semibold text-gray-800">{item.name}</h4>
                                                    <div className="text-right">
                                                        <p className="font-bold text-lg">{progress}%</p>
                                                        <p className="text-sm text-gray-600">{formatCurrencyFull(item.actual)} / {formatCurrencyFull(item.target)}</p>
                                                    </div>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                                                    <div 
                                                        className="progress-bar h-4 rounded-full"
                                                        style={{ 
                                                            width: `${progress}%`,
                                                            backgroundColor: progress >= 100 ? '#22c55e' : progress >= 75 ? '#3b82f6' : progress >= 50 ? '#f59e0b' : '#ef4444'
                                                        }}
                                                    ></div>
                                                </div>
                                                <p className="text-sm mt-1" style={{ color: variance >= 0 ? '#22c55e' : '#ef4444' }}>
                                                    {variance >= 0 ? 'â–²' : 'â–¼'} {formatCurrencyFull(Math.abs(variance))} {variance >= 0 ? 'over' : 'below'} target
                                                </p>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {view === 'targets' && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4 text-gray-800">Ticket Targets</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>Ideas Fest:</span>
                                            <span className="font-bold">2,500 tickets</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>GBEA:</span>
                                            <span className="font-bold">1,500 tickets @ Â£375</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>UK Startup Regional:</span>
                                            <span className="font-bold">1,500 tickets @ Â£55</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>Fast Growth Index:</span>
                                            <span className="font-bold">800 tickets @ Â£350</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>UK Startup National:</span>
                                            <span className="font-bold">400 tickets @ Â£99</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>GBIA:</span>
                                            <span className="font-bold">250 tickets @ Â£350</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>Ideas Tables:</span>
                                            <span className="font-bold">1,800 tickets @ Â£75</span>
                                        </div>
                                        <div className="flex justify-between p-3 bg-gray-50 rounded">
                                            <span>Ideas Community:</span>
                                            <span className="font-bold">5,000 members @ Â£49/mo</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-4 text-gray-800">Sponsorship Targets</h3>
                                    <div className="space-y-3">
                                        <div className="border-l-4 border-red-500 pl-3 py-2 bg-red-50">
                                            <h4 className="font-semibold">Headline Sponsors</h4>
                                            <div className="text-sm text-gray-700">
                                                <div>Ideas Fest: Â£225k (2 sponsors)</div>
                                                <div>Fast Growth Index: Â£150k</div>
                                                <div>GBEA: Â£50k</div>
                                                <div>GBIA: Â£50k</div>
                                            </div>
                                        </div>
                                        <div className="border-l-4 border-blue-500 pl-3 py-2 bg-blue-50">
                                            <h4 className="font-semibold">Category Sponsors</h4>
                                            <div className="text-sm text-gray-700">
                                                <div>UK Startup Regional: 220 Ã— Â£1,950 = Â£429k</div>
                                                <div>UK Startup National: 22 Ã— Â£5k = Â£110k</div>
                                                <div>GBEA: 20 Ã— Â£10k = Â£200k</div>
                                                <div>GBIA: 13 Ã— Â£10k = Â£130k</div>
                                                <div>Ideas Fest Stage: 10 Ã— Â£25k = Â£250k</div>
                                            </div>
                                        </div>
                                        <div className="border-l-4 border-green-500 pl-3 py-2 bg-green-50">
                                            <h4 className="font-semibold">Other Sponsors</h4>
                                            <div className="text-sm text-gray-700">
                                                <div>Traders: 100 Ã— Â£1,750 = Â£175k</div>
                                                <div>Tabletop: 100 Ã— Â£595 = Â£59.5k</div>
                                                <div>Ideas Community: 10 Ã— Â£10k = Â£100k</div>
                                                <div>Website & Digital: Â£265k</div>
                                                <div>Partnerships: Â£100k</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        <footer className="text-center text-gray-500 text-sm mt-8 pb-4">
                            <p>Ideas Forums Dashboard â€¢ Updated {new Date().toLocaleDateString()}</p>
                        </footer>
                    </div>
                </div>
            );
        };

        const domContainer = document.querySelector('#root');
        const root = ReactDOM.createRoot(domContainer);
        root.render(React.createElement(MonthlySalesTargets));
    </script>
</body>
</html>
